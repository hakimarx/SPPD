<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPPD App - Sistem Perjalanan Dinas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <?!= include('stylesheet'); ?>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">ğŸ“‹</span>
                    <span class="logo-text">SPPD App (Cloud)</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="dashboard">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-tab="sppd">
                    <span class="nav-icon">ğŸ“</span>
                    <span>Input SPPD</span>
                </button>
                <button class="nav-item" data-tab="lumpsum">
                    <span class="nav-icon">ğŸ’°</span>
                    <span>Hitung Lumpsum</span>
                </button>
                <button class="nav-item" data-tab="kuitansi">
                    <span class="nav-icon">ğŸ§¾</span>
                    <span>Kuitansi</span>
                </button>
                <button class="nav-item" data-tab="pengaturan">
                    <span class="nav-icon">âš™ï¸</span>
                    <span>Pengaturan</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Loading Overlay -->
            <div id="loading-overlay" class="loading-overlay" style="display: none;">
                <div class="spinner"></div>
                <p>Memproses data...</p>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p>Ringkasan data perjalanan dinas (Google Sheets)</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“„</div>
                        <div class="stat-info">
                            <span id="total-sppd" class="stat-value">0</span>
                            <span class="stat-label">Total SPPD</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’µ</div>
                        <div class="stat-info">
                            <span id="total-lumpsum" class="stat-value">Rp 0</span>
                            <span class="stat-label">Total Lumpsum</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ§¾</div>
                        <div class="stat-info">
                            <span id="total-kuitansi" class="stat-value">0</span>
                            <span class="stat-label">Total Kuitansi</span>
                        </div>
                    </div>
                </div>

                <div class="data-section">
                    <div class="section-header">
                        <h2>Daftar SPPD</h2>
                        <button class="btn btn-secondary btn-sm" onclick="refreshData()">ğŸ”„ Refresh Data</button>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Nomor SPPD</th>
                                    <th>Nama</th>
                                    <th>Tujuan</th>
                                    <th>Tanggal</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="sppd-table-body">
                                <tr>
                                    <td colspan="6" class="empty-state">
                                        <div class="empty-state-icon">ğŸ“„</div>
                                        <p>Memuat data...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- SPPD Form Tab -->
            <div id="sppd" class="tab-content">
                <div class="page-header">
                    <h1>Input SPPD</h1>
                    <p>Formulir pengisian Surat Perintah Perjalanan Dinas</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ“ Data SPPD</h3>
                    <form id="sppd-form">
                        <input type="hidden" id="sppd-id">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="sppd-nomor">Nomor SPPD</label>
                                <input type="text" id="sppd-nomor" placeholder="Contoh: 090/SPPD/2024" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-tanggal">Tanggal SPPD</label>
                                <input type="date" id="sppd-tanggal" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-nama">Nama Pegawai</label>
                                <input type="text" id="sppd-nama" placeholder="Nama lengkap" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-nip">NIP</label>
                                <input type="text" id="sppd-nip" placeholder="Nomor Induk Pegawai">
                            </div>
                            <div class="form-group">
                                <label for="sppd-pangkat">Pangkat/Golongan</label>
                                <input type="text" id="sppd-pangkat" placeholder="Contoh: Penata Muda / III/a">
                            </div>
                            <div class="form-group">
                                <label for="sppd-jabatan">Jabatan</label>
                                <input type="text" id="sppd-jabatan" placeholder="Jabatan pegawai">
                            </div>
                            <div class="form-group full-width">
                                <label for="sppd-maksud">Maksud Perjalanan Dinas</label>
                                <textarea id="sppd-maksud" placeholder="Tujuan/maksud perjalanan dinas" rows="2"
                                    required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="sppd-asal">Tempat Berangkat</label>
                                <input type="text" id="sppd-asal" placeholder="Kota asal" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-tujuan">Tempat Tujuan</label>
                                <input type="text" id="sppd-tujuan" placeholder="Kota tujuan" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-tgl-berangkat">Tanggal Berangkat</label>
                                <input type="date" id="sppd-tgl-berangkat" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-tgl-kembali">Tanggal Kembali</label>
                                <input type="date" id="sppd-tgl-kembali" required>
                            </div>
                            <div class="form-group">
                                <label for="sppd-transportasi">Alat Transportasi</label>
                                <select id="sppd-transportasi">
                                    <option value="">Pilih transportasi</option>
                                    <option value="Darat (Kendaraan Dinas)">Darat (Kendaraan Dinas)</option>
                                    <option value="Darat (Kendaraan Umum)">Darat (Kendaraan Umum)</option>
                                    <option value="Udara (Pesawat)">Udara (Pesawat)</option>
                                    <option value="Laut (Kapal)">Laut (Kapal)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sppd-anggaran">Sumber Anggaran</label>
                                <input type="text" id="sppd-anggaran" placeholder="MAK/Kode Program">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary"
                                onclick="resetForm('sppd-form')">Reset</button>
                            <button type="submit" class="btn btn-primary">ğŸ’¾ Simpan ke Sheets</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Lumpsum Form Tab -->
            <div id="lumpsum" class="tab-content">
                <div class="page-header">
                    <h1>Hitung Lumpsum</h1>
                    <p>Perhitungan biaya perjalanan dinas</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ’° Rincian Biaya</h3>
                    <form id="lumpsum-form">
                        <input type="hidden" id="lumpsum-id">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label for="lumpsum-sppd">Pilih SPPD</label>
                                <select id="lumpsum-sppd" required>
                                    <option value="">Memuat data...</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="lumpsum-hari">Jumlah Hari</label>
                                <input type="number" id="lumpsum-hari" min="1" value="1" required>
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-uang-harian">Uang Harian (per hari)</label>
                                <input type="number" id="lumpsum-uang-harian" min="0" placeholder="Rp" required>
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-transport">Biaya Transport</label>
                                <input type="number" id="lumpsum-transport" min="0" placeholder="Rp">
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-malam">Jumlah Malam</label>
                                <input type="number" id="lumpsum-malam" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-penginapan">Biaya Penginapan (per malam)</label>
                                <input type="number" id="lumpsum-penginapan" min="0" placeholder="Rp">
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-representasi">Uang Representasi</label>
                                <input type="number" id="lumpsum-representasi" min="0" placeholder="Rp">
                            </div>
                            <div class="form-group">
                                <label for="lumpsum-lainnya">Biaya Lain-lain</label>
                                <input type="number" id="lumpsum-lainnya" min="0" placeholder="Rp">
                            </div>
                        </div>

                        <div class="calculation-result">
                            <h3>Total Lumpsum</h3>
                            <div id="lumpsum-total" class="total-amount">Rp 0</div>
                            <button type="submit" class="btn btn-primary btn-lg">ğŸ’¾ Simpan ke Sheets</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Kuitansi Form Tab -->
            <div id="kuitansi" class="tab-content">
                <div class="page-header">
                    <h1>Kuitansi</h1>
                    <p>Buat bukti penerimaan pembayaran</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ§¾ Data Kuitansi</h3>
                    <form id="kuitansi-form">
                        <input type="hidden" id="kuitansi-id">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="kuitansi-nomor">Nomor Kuitansi</label>
                                <input type="text" id="kuitansi-nomor" placeholder="Nomor kuitansi" required>
                            </div>
                            <div class="form-group">
                                <label for="kuitansi-tanggal">Tanggal</label>
                                <input type="date" id="kuitansi-tanggal" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="kuitansi-sppd">Terkait SPPD (Opsional)</label>
                                <select id="kuitansi-sppd">
                                    <option value="">Tidak terkait SPPD</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label for="kuitansi-keperluan">Untuk Pembayaran</label>
                                <textarea id="kuitansi-keperluan" placeholder="Keperluan pembayaran" rows="2"
                                    required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="kuitansi-jumlah">Jumlah (Rp)</label>
                                <input type="number" id="kuitansi-jumlah" min="0" placeholder="Jumlah rupiah" required>
                            </div>
                            <div class="form-group">
                                <label for="kuitansi-penerima">Nama Penerima</label>
                                <input type="text" id="kuitansi-penerima" placeholder="Nama penerima" required>
                            </div>
                            <div class="form-group full-width">
                                <label for="kuitansi-jabatan-penerima">Jabatan Penerima</label>
                                <input type="text" id="kuitansi-jabatan-penerima" placeholder="Jabatan penerima">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary"
                                onclick="resetForm('kuitansi-form')">Reset</button>
                            <button type="submit" class="btn btn-primary">ğŸ’¾ Simpan ke Sheets</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Pengaturan Tab -->
            <div id="pengaturan" class="tab-content">
                <div class="page-header">
                    <h1>Pengaturan</h1>
                    <p>Konfigurasi aplikasi dan template dokumen</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ¢ Data Instansi</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="setting-instansi">Nama Instansi</label>
                            <input type="text" id="setting-instansi" placeholder="Nama instansi/kantor">
                        </div>
                        <div class="form-group full-width">
                            <label for="setting-alamat">Alamat</label>
                            <input type="text" id="setting-alamat" placeholder="Alamat lengkap instansi">
                        </div>
                        <div class="form-group">
                            <label for="setting-kota">Kota</label>
                            <input type="text" id="setting-kota" placeholder="Kota">
                        </div>
                    </div>
                </div>

                <div class="form-card mt-4">
                    <h3>âœï¸ Data Penandatangan</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="setting-ttd-nama">Nama Penandatangan</label>
                            <input type="text" id="setting-ttd-nama" placeholder="Nama lengkap">
                        </div>
                        <div class="form-group">
                            <label for="setting-ttd-nip">NIP Penandatangan</label>
                            <input type="text" id="setting-ttd-nip" placeholder="NIP">
                        </div>
                        <div class="form-group full-width">
                            <label for="setting-ttd-jabatan">Jabatan Penandatangan</label>
                            <input type="text" id="setting-ttd-jabatan" placeholder="Jabatan">
                        </div>
                    </div>
                </div>

                <div class="form-card mt-4">
                    <h3>ğŸ“„ ID Template Google Docs</h3>
                    <p class="text-muted">Masukkan ID file Google Docs untuk template dokumen.</p>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="setting-template-sppd">ID Template SPPD</label>
                            <input type="text" id="setting-template-sppd" placeholder="ID File Google Doc">
                        </div>
                        <div class="form-group full-width">
                            <label for="setting-template-lumpsum">ID Template Lumpsum</label>
                            <input type="text" id="setting-template-lumpsum" placeholder="ID File Google Doc">
                        </div>
                        <div class="form-group full-width">
                            <label for="setting-template-kuitansi">ID Template Kuitansi</label>
                            <input type="text" id="setting-template-kuitansi" placeholder="ID File Google Doc">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="simpanPengaturan()">ğŸ’¾ Simpan
                            Pengaturan</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <?!= include('javascript'); ?>
</body>

</html>